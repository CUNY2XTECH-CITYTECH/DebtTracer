<!DOCTYPE html>
<html lang="<%= lang %>">
  <head>
    <meta charset="UTF-8" />
    <title><%= t('title') %></title>
    <link rel="stylesheet" href="styles/styles.css" />
    <link rel="stylesheet" href="styles/aiChat.css">
    <link rel="stylesheet" href="styles/profilePic.css">
    <link rel="stylesheet" href="styles/pieCharts.css">
    <!-- <link rel="stylesheet" href="styles/results.css"> -->
    <!-- Bootstrap CSS--> 
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


  </head>
  <body>
    <header class="header collapsedx" id="nav-Bar">
      <nav class="navbar">
        <div class="close-nav">
          <button class="close-nav-button" id="close-nav">X</button>
        </div>
        <div class="Title_logo">
          <img src="/images/default-avatar.png" alt="Logo" class="logo" />
          <h2><%= t('title') %></h2>
        </div>
        <div class="main-nav">
          <ul class="nav-links">
              <li><a href="/dashboard"><%= t('nav.home') %></a></li>
              <li><a href="/earnings"><%= t('nav.earnings') %></a></li>
              <li><a href="/expenses"><%= t('nav.expenses') %></a></li>
              <li><a href="/results"><%= t('nav.results') %></a></li>
              <li><a href="/auth/logout"><%= t('nav.logout') %></a></li>
            </ul>
          </div>
        </nav>
      </header>
      <button class="open-nav" id="open-nav"><i class="fas fa-bars"></i></button>
    <div class="profile-dark-bar" id="darkModebar">
      <div class="lang">
        <select id="language-select">
          <option value="en" <%= lang === 'en' ? 'selected' : '' %>>English</option>
          <option value="es" <%= lang === 'es' ? 'selected' : '' %>>Espa√±ol</option>
        </select>
      </div>
      <div class="theme-switch">
        <i class="fas fa-sun"></i> 
        <input type="checkbox" id="theme-toggle"/> <!-- Light mode icon -->
        <label for="theme-toggle" class="theme-toggle-label"></label>
        <i class="fas fa-moon"></i>
      </div>
      <div class="profilePic">
        <a href="/profile">
        <img id="siteProfile"
          src="<%= (user && user.profilePic) ? user.profilePic : '/images/logo.png' %>"
          alt="Profile Picture" width="150" 
        />
      </a>
      </div>
      <script>
        document.getElementById('language-select').addEventListener('change', function () {
          const params = new URLSearchParams(window.location.search);
          params.set('lang', this.value);
          window.location.search = params.toString();
        });
      </script>
    </div>
